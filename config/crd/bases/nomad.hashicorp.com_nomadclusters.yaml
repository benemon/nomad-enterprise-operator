---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.0
  name: nomadclusters.nomad.hashicorp.com
spec:
  group: nomad.hashicorp.com
  names:
    kind: NomadCluster
    listKind: NomadClusterList
    plural: nomadclusters
    shortNames:
    - nc
    singular: nomadcluster
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.phase
      name: Phase
      type: string
    - jsonPath: .status.readyReplicas
      name: Ready
      type: integer
    - jsonPath: .spec.replicas
      name: Desired
      type: integer
    - jsonPath: .status.advertiseAddress
      name: Advertise
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: NomadCluster is the Schema for the nomadclusters API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: NomadClusterSpec defines the desired state of NomadCluster.
            properties:
              affinity:
                description: Affinity configuration for pod scheduling
                properties:
                  podAntiAffinity:
                    description: PodAntiAffinity configuration
                    properties:
                      enabled:
                        default: true
                        description: Enabled determines if pod anti-affinity is configured
                        type: boolean
                      topologyKey:
                        default: kubernetes.io/hostname
                        description: TopologyKey for anti-affinity
                        type: string
                      type:
                        default: preferred
                        description: 'Type: preferred or required'
                        enum:
                        - preferred
                        - required
                        type: string
                      weight:
                        default: 100
                        description: Weight for preferred anti-affinity (1-100)
                        format: int32
                        maximum: 100
                        minimum: 1
                        type: integer
                    type: object
                type: object
              gossip:
                description: Gossip encryption configuration
                properties:
                  secretKey:
                    default: gossip-key
                    description: SecretKey is the key within the secret
                    type: string
                  secretName:
                    description: SecretName is the name of secret containing gossip
                      key (auto-created if empty)
                    type: string
                type: object
              image:
                description: Image configuration for the Nomad container
                properties:
                  pullPolicy:
                    default: IfNotPresent
                    description: PullPolicy defines when to pull the image
                    enum:
                    - Always
                    - IfNotPresent
                    - Never
                    type: string
                  repository:
                    default: hashicorp/nomad
                    description: Repository is the container image repository
                    type: string
                  tag:
                    default: 1.11-ent
                    description: Tag is the container image tag
                    type: string
                type: object
              imagePullSecrets:
                description: ImagePullSecrets for private registries
                items:
                  description: |-
                    LocalObjectReference contains enough information to let you locate the
                    referenced object inside the same namespace.
                  properties:
                    name:
                      default: ""
                      description: |-
                        Name of the referent.
                        This field is effectively required, but due to backwards compatibility is
                        allowed to be empty. Instances of this type with an empty value here are
                        almost certainly wrong.
                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                      type: string
                  type: object
                  x-kubernetes-map-type: atomic
                type: array
              license:
                description: License is a reference to a secret containing the Nomad
                  Enterprise license
                properties:
                  secretKey:
                    default: license
                    description: 'SecretKey is the key within the secret (default:
                      "license")'
                    type: string
                  secretName:
                    description: SecretName is the name of the secret containing the
                      license
                    type: string
                required:
                - secretName
                type: object
              nodeSelector:
                additionalProperties:
                  type: string
                description: NodeSelector for pod scheduling
                type: object
              openshift:
                description: OpenShift-specific configuration
                properties:
                  enabled:
                    description: |-
                      Enabled determines if OpenShift-specific resources are created.
                      Set to true to create Routes and ServiceMonitors.
                    type: boolean
                  monitoring:
                    description: Monitoring configuration for ServiceMonitor and PrometheusRule
                    properties:
                      additionalLabels:
                        additionalProperties:
                          type: string
                        description: AdditionalLabels to add to ServiceMonitor
                        type: object
                      enabled:
                        default: true
                        description: Enabled determines if monitoring resources are
                          created
                        type: boolean
                      prometheusRule:
                        description: PrometheusRule configuration (DEPRECATED - use
                          prometheusRulesEnabled)
                        properties:
                          enabled:
                            description: Enabled determines if PrometheusRule is created
                              (DEPRECATED - use MonitoringSpec.PrometheusRulesEnabled)
                            type: boolean
                        type: object
                      prometheusRulesEnabled:
                        default: false
                        description: PrometheusRulesEnabled determines if PrometheusRule
                          is created
                        type: boolean
                      scrapeInterval:
                        default: 30s
                        description: ScrapeInterval for metrics collection (simplified
                          from serviceMonitor.interval)
                        type: string
                      scrapeTimeout:
                        default: 10s
                        description: ScrapeTimeout for metric collection (simplified
                          from serviceMonitor.scrapeTimeout)
                        type: string
                      serviceMonitor:
                        description: ServiceMonitor configuration (DEPRECATED - use
                          flattened fields above)
                        properties:
                          additionalLabels:
                            additionalProperties:
                              type: string
                            description: AdditionalLabels to add to ServiceMonitor
                              (DEPRECATED - use MonitoringSpec.AdditionalLabels)
                            type: object
                          interval:
                            description: Interval for scraping metrics (DEPRECATED
                              - use MonitoringSpec.ScrapeInterval)
                            type: string
                          scrapeTimeout:
                            description: ScrapeTimeout for metric collection (DEPRECATED
                              - use MonitoringSpec.ScrapeTimeout)
                            type: string
                        type: object
                    type: object
                  route:
                    description: Route configuration for OpenShift Route
                    properties:
                      enabled:
                        description: |-
                          Enabled determines if Route is created.
                          Only applies when OpenShift.Enabled is true.
                        type: boolean
                      host:
                        description: Host is the custom hostname (auto-generated if
                          empty)
                        type: string
                      tls:
                        description: TLS configuration
                        properties:
                          insecureEdgeTerminationPolicy:
                            default: Redirect
                            description: 'InsecureEdgeTerminationPolicy: Redirect,
                              Allow, or None'
                            enum:
                            - Redirect
                            - Allow
                            - None
                            type: string
                          termination:
                            default: edge
                            description: 'Termination type: edge, passthrough, or
                              reencrypt'
                            enum:
                            - edge
                            - passthrough
                            - reencrypt
                            type: string
                        type: object
                    type: object
                type: object
              persistence:
                description: Persistence configuration for data volumes
                properties:
                  audit:
                    description: Audit volume configuration (DEPRECATED - use server.audit.size
                      instead)
                    properties:
                      enabled:
                        default: true
                        description: Enabled determines if separate audit volume is
                          used
                        type: boolean
                      size:
                        default: 5Gi
                        description: Size of the audit volume
                        type: string
                      storageClassName:
                        description: StorageClassName for the audit PVC
                        type: string
                    type: object
                  enabled:
                    description: |-
                      Enabled is DEPRECATED - persistence is now inferred from Size being non-empty.
                      If Size is set, persistence is enabled. This field is ignored.
                    type: boolean
                  size:
                    default: 10Gi
                    description: |-
                      Size of the data volume. If set, persistence is enabled.
                      Set to empty string to disable persistence (use emptyDir).
                    type: string
                  storageClassName:
                    description: StorageClassName for the PVC (uses cluster default
                      if empty)
                    type: string
                type: object
              replicas:
                default: 3
                description: Replicas is the number of Nomad server replicas (should
                  be 1, 3, or 5)
                enum:
                - 1
                - 3
                - 5
                format: int32
                type: integer
              resources:
                description: Resources defines CPU and memory requests/limits
                properties:
                  claims:
                    description: |-
                      Claims lists the names of resources, defined in spec.resourceClaims,
                      that are used by this container.

                      This is an alpha field and requires enabling the
                      DynamicResourceAllocation feature gate.

                      This field is immutable. It can only be set for containers.
                    items:
                      description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                      properties:
                        name:
                          description: |-
                            Name must match the name of one entry in pod.spec.resourceClaims of
                            the Pod where this field is used. It makes that resource available
                            inside a container.
                          type: string
                        request:
                          description: |-
                            Request is the name chosen for a request in the referenced claim.
                            If empty, everything from the claim is made available, otherwise
                            only the result of this request.
                          type: string
                      required:
                      - name
                      type: object
                    type: array
                    x-kubernetes-list-map-keys:
                    - name
                    x-kubernetes-list-type: map
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: |-
                      Limits describes the maximum amount of compute resources allowed.
                      More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: |-
                      Requests describes the minimum amount of compute resources required.
                      If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                      otherwise to an implementation-defined value. Requests cannot exceed Limits.
                      More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                    type: object
                type: object
              server:
                description: Server configuration options
                properties:
                  acl:
                    description: ACL configuration
                    properties:
                      bootstrapSecretName:
                        description: BootstrapSecretName is the secret to store bootstrap
                          token (auto-created)
                        type: string
                      enabled:
                        default: false
                        description: Enabled determines if ACLs are enabled
                        type: boolean
                    type: object
                  audit:
                    description: Audit logging configuration
                    properties:
                      deliveryGuarantee:
                        default: enforced
                        description: |-
                          DeliveryGuarantee determines behavior when audit logging fails.
                          "enforced" blocks requests if audit fails (recommended for production).
                          "best-effort" allows requests even if audit fails (useful for development).
                        enum:
                        - enforced
                        - best-effort
                        type: string
                      enabled:
                        default: true
                        description: |-
                          Enabled determines if audit logging is enabled.
                          When enabled, an audit volume is automatically created.
                        type: boolean
                      format:
                        default: json
                        description: Format of audit logs (json or log)
                        enum:
                        - json
                        - log
                        type: string
                      rotateDuration:
                        default: 24h
                        description: RotateDuration for log rotation
                        type: string
                      rotateMaxFiles:
                        default: 15
                        description: RotateMaxFiles to retain
                        type: integer
                      size:
                        default: 5Gi
                        description: Size of the audit volume (created automatically
                          when audit is enabled)
                        type: string
                      storageClassName:
                        description: StorageClassName for the audit PVC (uses cluster
                          default if empty)
                        type: string
                    type: object
                  autopilot:
                    description: Autopilot configuration
                    properties:
                      cleanupDeadServers:
                        default: true
                        description: CleanupDeadServers enables automatic removal
                          of dead servers
                        type: boolean
                      lastContactThreshold:
                        default: 200ms
                        description: LastContactThreshold before marking server unhealthy
                        type: string
                      maxTrailingLogs:
                        default: 250
                        description: MaxTrailingLogs before server is considered unhealthy
                        type: integer
                      serverStabilizationTime:
                        default: 10s
                        description: ServerStabilizationTime before becoming voter
                        type: string
                    type: object
                  extraConfig:
                    description: ExtraConfig is raw HCL to append to server configuration
                    type: string
                  snapshot:
                    description: Snapshot agent configuration
                    properties:
                      enabled:
                        default: false
                        description: Enabled determines if snapshots are enabled
                        type: boolean
                      interval:
                        default: 1h
                        description: Interval between snapshots
                        type: string
                      retain:
                        default: 24
                        description: Retain number of snapshots
                        type: integer
                      s3:
                        description: S3 configuration for snapshot storage
                        properties:
                          bucket:
                            description: Bucket name
                            type: string
                          credentialsSecretName:
                            description: CredentialsSecretName containing access-key-id
                              and secret-access-key
                            type: string
                          endpoint:
                            description: Endpoint URL for S3-compatible storage
                            type: string
                          forcePathStyle:
                            default: true
                            description: ForcePathStyle enables path-style addressing
                            type: boolean
                          region:
                            default: us-east-1
                            description: Region
                            type: string
                        type: object
                    type: object
                  tls:
                    description: TLS configuration
                    properties:
                      enabled:
                        default: false
                        description: Enabled determines if TLS is enabled
                        type: boolean
                      secretName:
                        description: SecretName containing TLS certificates (ca.crt,
                          server.crt, server.key)
                        type: string
                    type: object
                type: object
              services:
                description: Services configuration for Nomad endpoints
                properties:
                  external:
                    description: External LoadBalancer service configuration
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: Annotations for the external service
                        type: object
                      loadBalancerIP:
                        description: LoadBalancerIP is the requested IP for LoadBalancer
                          type
                        type: string
                      type:
                        default: LoadBalancer
                        description: Type of external service (LoadBalancer or NodePort)
                        enum:
                        - LoadBalancer
                        - NodePort
                        type: string
                    type: object
                type: object
              tolerations:
                description: Tolerations for pod scheduling
                items:
                  description: |-
                    The pod this Toleration is attached to tolerates any taint that matches
                    the triple <key,value,effect> using the matching operator <operator>.
                  properties:
                    effect:
                      description: |-
                        Effect indicates the taint effect to match. Empty means match all taint effects.
                        When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                      type: string
                    key:
                      description: |-
                        Key is the taint key that the toleration applies to. Empty means match all taint keys.
                        If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                      type: string
                    operator:
                      description: |-
                        Operator represents a key's relationship to the value.
                        Valid operators are Exists and Equal. Defaults to Equal.
                        Exists is equivalent to wildcard for value, so that a pod can
                        tolerate all taints of a particular category.
                      type: string
                    tolerationSeconds:
                      description: |-
                        TolerationSeconds represents the period of time the toleration (which must be
                        of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                        it is not set, which means tolerate the taint forever (do not evict). Zero and
                        negative values will be treated as 0 (evict immediately) by the system.
                      format: int64
                      type: integer
                    value:
                      description: |-
                        Value is the taint value the toleration matches to.
                        If the operator is Exists, the value should be empty, otherwise just a regular string.
                      type: string
                  type: object
                type: array
              topology:
                description: Topology defines region and datacenter settings
                properties:
                  datacenter:
                    description: Datacenter name (defaults to namespace if empty)
                    type: string
                  region:
                    default: global
                    description: Region name for this Nomad cluster
                    type: string
                type: object
              topologySpreadConstraints:
                description: TopologySpreadConstraints for distributing pods
                items:
                  description: TopologySpreadConstraint specifies how to spread matching
                    pods among the given topology.
                  properties:
                    labelSelector:
                      description: |-
                        LabelSelector is used to find matching pods.
                        Pods that match this label selector are counted to determine the number of pods
                        in their corresponding topology domain.
                      properties:
                        matchExpressions:
                          description: matchExpressions is a list of label selector
                            requirements. The requirements are ANDed.
                          items:
                            description: |-
                              A label selector requirement is a selector that contains values, a key, and an operator that
                              relates the key and values.
                            properties:
                              key:
                                description: key is the label key that the selector
                                  applies to.
                                type: string
                              operator:
                                description: |-
                                  operator represents a key's relationship to a set of values.
                                  Valid operators are In, NotIn, Exists and DoesNotExist.
                                type: string
                              values:
                                description: |-
                                  values is an array of string values. If the operator is In or NotIn,
                                  the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                  the values array must be empty. This array is replaced during a strategic
                                  merge patch.
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                            required:
                            - key
                            - operator
                            type: object
                          type: array
                          x-kubernetes-list-type: atomic
                        matchLabels:
                          additionalProperties:
                            type: string
                          description: |-
                            matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                            map is equivalent to an element of matchExpressions, whose key field is "key", the
                            operator is "In", and the values array contains only "value". The requirements are ANDed.
                          type: object
                      type: object
                      x-kubernetes-map-type: atomic
                    matchLabelKeys:
                      description: |-
                        MatchLabelKeys is a set of pod label keys to select the pods over which
                        spreading will be calculated. The keys are used to lookup values from the
                        incoming pod labels, those key-value labels are ANDed with labelSelector
                        to select the group of existing pods over which spreading will be calculated
                        for the incoming pod. The same key is forbidden to exist in both MatchLabelKeys and LabelSelector.
                        MatchLabelKeys cannot be set when LabelSelector isn't set.
                        Keys that don't exist in the incoming pod labels will
                        be ignored. A null or empty list means only match against labelSelector.

                        This is a beta field and requires the MatchLabelKeysInPodTopologySpread feature gate to be enabled (enabled by default).
                      items:
                        type: string
                      type: array
                      x-kubernetes-list-type: atomic
                    maxSkew:
                      description: |-
                        MaxSkew describes the degree to which pods may be unevenly distributed.
                        When `whenUnsatisfiable=DoNotSchedule`, it is the maximum permitted difference
                        between the number of matching pods in the target topology and the global minimum.
                        The global minimum is the minimum number of matching pods in an eligible domain
                        or zero if the number of eligible domains is less than MinDomains.
                        For example, in a 3-zone cluster, MaxSkew is set to 1, and pods with the same
                        labelSelector spread as 2/2/1:
                        In this case, the global minimum is 1.
                        | zone1 | zone2 | zone3 |
                        |  P P  |  P P  |   P   |
                        - if MaxSkew is 1, incoming pod can only be scheduled to zone3 to become 2/2/2;
                        scheduling it onto zone1(zone2) would make the ActualSkew(3-1) on zone1(zone2)
                        violate MaxSkew(1).
                        - if MaxSkew is 2, incoming pod can be scheduled onto any zone.
                        When `whenUnsatisfiable=ScheduleAnyway`, it is used to give higher precedence
                        to topologies that satisfy it.
                        It's a required field. Default value is 1 and 0 is not allowed.
                      format: int32
                      type: integer
                    minDomains:
                      description: |-
                        MinDomains indicates a minimum number of eligible domains.
                        When the number of eligible domains with matching topology keys is less than minDomains,
                        Pod Topology Spread treats "global minimum" as 0, and then the calculation of Skew is performed.
                        And when the number of eligible domains with matching topology keys equals or greater than minDomains,
                        this value has no effect on scheduling.
                        As a result, when the number of eligible domains is less than minDomains,
                        scheduler won't schedule more than maxSkew Pods to those domains.
                        If value is nil, the constraint behaves as if MinDomains is equal to 1.
                        Valid values are integers greater than 0.
                        When value is not nil, WhenUnsatisfiable must be DoNotSchedule.

                        For example, in a 3-zone cluster, MaxSkew is set to 2, MinDomains is set to 5 and pods with the same
                        labelSelector spread as 2/2/2:
                        | zone1 | zone2 | zone3 |
                        |  P P  |  P P  |  P P  |
                        The number of domains is less than 5(MinDomains), so "global minimum" is treated as 0.
                        In this situation, new pod with the same labelSelector cannot be scheduled,
                        because computed skew will be 3(3 - 0) if new Pod is scheduled to any of the three zones,
                        it will violate MaxSkew.
                      format: int32
                      type: integer
                    nodeAffinityPolicy:
                      description: |-
                        NodeAffinityPolicy indicates how we will treat Pod's nodeAffinity/nodeSelector
                        when calculating pod topology spread skew. Options are:
                        - Honor: only nodes matching nodeAffinity/nodeSelector are included in the calculations.
                        - Ignore: nodeAffinity/nodeSelector are ignored. All nodes are included in the calculations.

                        If this value is nil, the behavior is equivalent to the Honor policy.
                      type: string
                    nodeTaintsPolicy:
                      description: |-
                        NodeTaintsPolicy indicates how we will treat node taints when calculating
                        pod topology spread skew. Options are:
                        - Honor: nodes without taints, along with tainted nodes for which the incoming pod
                        has a toleration, are included.
                        - Ignore: node taints are ignored. All nodes are included.

                        If this value is nil, the behavior is equivalent to the Ignore policy.
                      type: string
                    topologyKey:
                      description: |-
                        TopologyKey is the key of node labels. Nodes that have a label with this key
                        and identical values are considered to be in the same topology.
                        We consider each <key, value> as a "bucket", and try to put balanced number
                        of pods into each bucket.
                        We define a domain as a particular instance of a topology.
                        Also, we define an eligible domain as a domain whose nodes meet the requirements of
                        nodeAffinityPolicy and nodeTaintsPolicy.
                        e.g. If TopologyKey is "kubernetes.io/hostname", each Node is a domain of that topology.
                        And, if TopologyKey is "topology.kubernetes.io/zone", each zone is a domain of that topology.
                        It's a required field.
                      type: string
                    whenUnsatisfiable:
                      description: |-
                        WhenUnsatisfiable indicates how to deal with a pod if it doesn't satisfy
                        the spread constraint.
                        - DoNotSchedule (default) tells the scheduler not to schedule it.
                        - ScheduleAnyway tells the scheduler to schedule the pod in any location,
                          but giving higher precedence to topologies that would help reduce the
                          skew.
                        A constraint is considered "Unsatisfiable" for an incoming pod
                        if and only if every possible node assignment for that pod would violate
                        "MaxSkew" on some topology.
                        For example, in a 3-zone cluster, MaxSkew is set to 1, and pods with the same
                        labelSelector spread as 3/1/1:
                        | zone1 | zone2 | zone3 |
                        | P P P |   P   |   P   |
                        If WhenUnsatisfiable is set to DoNotSchedule, incoming pod can only be scheduled
                        to zone2(zone3) to become 3/2/1(3/1/2) as ActualSkew(2-1) on zone2(zone3) satisfies
                        MaxSkew(1). In other words, the cluster can still be imbalanced, but scheduler
                        won't make it *more* imbalanced.
                        It's a required field.
                      type: string
                  required:
                  - maxSkew
                  - topologyKey
                  - whenUnsatisfiable
                  type: object
                type: array
            required:
            - license
            type: object
            x-kubernetes-validations:
            - message: server.tls.secretName is required when server.tls.enabled is
                true
              rule: '!has(self.server.tls) || !self.server.tls.enabled || size(self.server.tls.secretName)
                > 0'
            - message: server.snapshot.s3.bucket is required when server.snapshot.enabled
                is true
              rule: '!has(self.server.snapshot) || !self.server.snapshot.enabled ||
                size(self.server.snapshot.s3.bucket) > 0'
          status:
            description: NomadClusterStatus defines the observed state of NomadCluster.
            properties:
              aclBootstrapSecretName:
                description: ACLBootstrapSecretName is the secret containing bootstrap
                  token
                type: string
              aclBootstrapped:
                description: ACLBootstrapped indicates if ACL bootstrap has completed
                type: boolean
              advertiseAddress:
                description: AdvertiseAddress is the resolved LoadBalancer address
                type: string
              autopilot:
                description: Autopilot contains Raft autopilot health information
                properties:
                  failureTolerance:
                    description: FailureTolerance is the number of server failures
                      the cluster can tolerate
                    type: integer
                  healthy:
                    description: Healthy indicates if autopilot considers the cluster
                      healthy
                    type: boolean
                  servers:
                    description: Servers is the detailed status of each server
                    items:
                      description: ServerStatus represents the status of a single
                        Nomad server in the cluster
                      properties:
                        address:
                          description: Address is the server's RPC address
                          type: string
                        healthy:
                          description: Healthy indicates if the server is healthy
                          type: boolean
                        id:
                          description: ID is the Raft server ID
                          type: string
                        lastContact:
                          description: LastContact is the time since last contact
                            with the leader
                          type: string
                        leader:
                          description: Leader indicates if this server is the current
                            Raft leader
                          type: boolean
                        name:
                          description: Name is the server name (typically the pod
                            name)
                          type: string
                        stableSince:
                          description: StableSince is when the server became stable
                          type: string
                        voter:
                          description: Voter indicates if the server is a voting member
                          type: boolean
                      required:
                      - address
                      - healthy
                      - id
                      - leader
                      - name
                      - voter
                      type: object
                    type: array
                  voters:
                    description: Voters is the number of voting servers
                    type: integer
                required:
                - failureTolerance
                - healthy
                - voters
                type: object
              conditions:
                description: Conditions represent the latest observations of the cluster
                  state
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              currentReplicas:
                description: CurrentReplicas is the current number of Nomad server
                  pods
                format: int32
                type: integer
              gossipKeySecretName:
                description: GossipKeySecretName is the name of secret containing
                  gossip key
                type: string
              lastReconcileTime:
                description: LastReconcileTime is the timestamp of last reconciliation
                format: date-time
                type: string
              leaderID:
                description: LeaderID is the Raft leader node ID (if known)
                type: string
              license:
                description: License contains Nomad Enterprise license information
                properties:
                  expirationTime:
                    description: ExpirationTime is when the license expires
                    type: string
                  features:
                    description: Features is the list of licensed features
                    items:
                      type: string
                    type: array
                  licenseId:
                    description: LicenseID is the unique identifier for the license
                    type: string
                  terminationTime:
                    description: TerminationTime is when the license terminates (grace
                      period end)
                    type: string
                  valid:
                    description: Valid indicates if the license is currently valid
                    type: boolean
                required:
                - valid
                type: object
              observedGeneration:
                description: ObservedGeneration is the last observed generation
                format: int64
                type: integer
              phase:
                description: Phase represents the current phase of the cluster
                enum:
                - Pending
                - Creating
                - Running
                - Updating
                - Failed
                type: string
              readyReplicas:
                description: ReadyReplicas is the number of ready Nomad server pods
                format: int32
                type: integer
              routeHost:
                description: RouteHost is the assigned Route hostname
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
